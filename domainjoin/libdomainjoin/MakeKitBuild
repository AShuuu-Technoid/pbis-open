SUBDIRS="include"

make()
{
    DJ_SOURCES="\
       src/djparsehosts.c \
       src/djhostinfo.c   \
       src/djauthinfo.c   \
       src/djkrb5conf.c   \
       src/djauditing.c   \
       src/djlogger.c     \
       src/djdistroinfo.c \
       src/djstr.c    \
       src/djroutines.c   \
       src/djregistry.c   \
       src/djservicemgr.c \
       src/djprocutils.c  \
       src/djmodule.c \
       src/djapi.c \
       src/djsystemscripts.c \
       src/aix/djsecuser.c    \
       src/djnsswitch.c    \
       src/djpamconf.c    \
       src/aix/djlogincfg.c   \
       src/aix/djmethodcfg.c  \
       src/aix/djaixparser.c \
       src/mac/djconfig_mac.c \
       src/djsshconf.c    \
       src/djddns.c \
       src/djdaemonmgr.c \
       src/djdaemonmgr_nonmac.c \
       src/djpbps/pbpsLog.c \
       src/djpbps/pbpsUtil.c \
       src/djpbps/pbpsConfig.c \
       src/djpbps/pbpsCredentials.c \
       src/djpbps/pbpsManagedAccounts.c \
       src/djpbps/pbpsRequestId.c \
       src/djpbps/pbpsSignInOut.c \
       src/djpbps/pbps.c"

    mk_library \
	LIB=domainjoin \
	SOURCES="$DJ_SOURCES" \
	INCLUDEDIRS="include ../include ../../lwadvapi/include ../../tomlc99" \
	HEADERDEPS="lsa/lsa.h lsa/ad.h ctbase.h eventlog.h lwsm/lwsm.h" \
	LIBDEPS="centutils lwnetclientapi regclient eventlog lsaclient lwsm rsutils tomlc99"

    mk_stage DESTDIR="${MK_SYSCONFDIR}" SOURCE="src/djpbps/djpbps.config.template"
}
